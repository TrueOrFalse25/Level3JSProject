<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roll Roll Roll Your Dice</title>
    <script>
        rollList = [];
        var mean;
        var median;
        var mode;
        var doubles = 0;
        var triples = 0;

        function initialize() {
            row1 = document.getElementById("rollSum");
            row2 = document.getElementById("eachNum");
           
            meanOutput = document.getElementById("mean");
            medianOutput = document.getElementById("median");
            modeOutput = document.getElementById("mode");

            doublesOutput = document.getElementById("doubles");
            triplesOutput = document.getElementById("triples");
        }

        function rollDice() {
            var numRolls = (document.getElementById("eachRoll")).value;
            for (let i = 0; i < numRolls; i++) {
                if (numDice == 1) {
                    rollList.push(getRandomInteger(1, 6));
                }
                else if (numDice == 2) {
                    var num1 = getRandomInteger(1, 6);
                    var num2 = getRandomInteger(1, 6);
                    rollList.push(num1 + num2);
                    if (num1 == num2) {
                        doubles++;
                    }
                }
                else {
                    var num1 = getRandomInteger(1, 6);
                    var num2 = getRandomInteger(1, 6);
                    var num3 = getRandomInteger(1, 6);
                    rollList.push(num1 + num2 + num3);  
                    if (num1 == num2 || num2 == num3 || num1 == num3) {
                        doubles++;
                    }
                    if (num1 == num2 && num2 == num3) {
                        triples++;
                    }
                }
            }
            display();
        }

        function getEachNum() {
            for (let i = (1 * numDice); i <= (6 * numDice); i++) {
                var newCell = row1.insertCell();
                newCell.innerHTML = i;
                var count = 0;
                for (let j = 0; j < rollList.length; j++) {
                    if (rollList[j] == i) {
                        count++;
                    }
                }
                row2.insertCell().innerHTML = count;
            }
        }

        function getMean() {
            var sum = 0;
            for (let i = 0; i < rollList.length; i++) {
                sum += rollList[i];
            }
            mean = sum / rollList.length;
            mean = Math.round(mean * 100) / 100;
        }

        function getMedian() {
            rollList = rollList.sort(function(a, b){return a - b});
            var midIndex = rollList.length / 2;
            median = rollList[midIndex - 1];
            if (rollList.length % 2 == 0) {
                var midIndex2 = (rollList.length / 2) + 1;
                median = parseInt((rollList[midIndex - 1] + rollList[midIndex2 - 1]) / 2);
            }
        }

        function getMode() {
            var highest = 0;
            var mostCommon = 0;
            for (let i = 0; i < rollList.length; i++) {
                var temp = 1;
                for (let j = i + 1; j < rollList.length; j++) {
                    if (rollList[i] == rollList[j]) {
                        temp++;
                    }
                }
                if (temp > highest) {
                    highest = temp;
                    mostCommon = rollList[i];
                }
                if (temp == highest && rollList[i] != mostCommon) {
                    mostCommon += ", " + rollList[i];
                }
            }
            mode = mostCommon;
        }

        function submit() {
            numDice = (document.getElementById("numDice")).value;
            if (numDice == 1 || numDice == 2 || numDice == 3) {
                reset();
                rollDice();
            }
        }

        function getRandomInteger(lower, upper) {
            var multiplier = upper - (lower - 1);
            var random = parseInt(Math.random() * multiplier) + lower;
            return random;
        }

        function reset() {
            var row1Columns = row1.getElementsByTagName("td").length;
            for (let i = row1Columns; i > 0; i--) {
                row1.deleteCell(i);
                row2.deleteCell(i);
            }
            for (let i = 0; i < rollList.length; i++) {
                rollList.pop();
                i--;
            }
            doubles = 0;
            triples = 0;
        }

        function display() {
            getEachNum();
            doublesOutput.innerHTML = doubles;
            triplesOutput.innerHTML = triples;
            getMean();
            meanOutput.innerHTML = mean;
            getMedian();
            medianOutput.innerHTML = median;
            getMode();
            modeOutput.innerHTML = mode;
        }
    </script>
    <style>
        button {
            display: block;
        }

        table {
            border: solid black;
        }
        
        th, td {
            border: solid black;
            padding: 10px;
        }

        body {
            background-color: burlywood;
        }
    </style>
</head>
<body onload="initialize();">
    <h1>Roll Roll Roll Your Dice!</h1>
    <form>
        <p><strong>Number of Dice Rolled (1/2/3)</strong></p>
        <input type="number" id="numDice">
        <p><strong>Rolls of Each Die</strong></p>
        <input type="number" id="eachRoll">
    </form>
    <br>
    <button onclick="submit();">Submit</button>
    <table>
        <tr id="rollSum">
            <th><strong>Sum of Rolls</strong></th>
        </tr>
        <br>
        <tr id="eachNum">
            <th><strong>Number of Each Roll</strong></th>
        </tr>
    </table>
    <br>
    <table>
        <tr>
            
            <th>Mean</th>
            <th>Median</th>
            <th>Mode</th>
            <th>Doubles</th>
            <th>Triples</th>
        </tr>
        <tr>
            <td id="mean"></td>
            <td id="median"></td>
            <td id="mode"></td>
            <td id="doubles"></td>
            <td id="triples"></td>
        </tr>
    </table>
</body>
</html>